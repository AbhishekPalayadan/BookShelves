<!DOCTYPE html>
<html lang="en">

<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <title>
        <%= title || "Admin" %>
    </title>
    <script src="https://cdn.jsdelivr.net/npm/sweetalert2@11"></script>
    <link rel="stylesheet" href="https://cdnjs.cloudflare.com/ajax/libs/font-awesome/6.5.0/css/all.min.css">
    <link rel="stylesheet" href="/css/admin/header.css">

</head>

<body>

    <div class="layout">

        <div class="sidebar">
            <div class="logo">
                <img src="/images/book-icon.png" class="logo-icon">
                <span class="logo-text">Bookshelves</span>
            </div>

            <div class="nav-menu">

                <a href="/admin" class="nav-item <%= activeMenu==="dashboard"?'active':''%>">
                    <i class="fa-solid fa-gauge-high"></i>
                    <span>Dashboard</span>
                </a>

                <a href="/admin/users" class="nav-item <%= activeMenu==="users"?'active':''%>">
                    <i class="fa-solid fa-users"></i>
                    <span>Users</span>
                </a>

                <a href="/admin/category" class="nav-item <%= activeMenu==="category"?'active':''%>">
                    <i class="fa-solid fa-layer-group"></i>
                    <span>Category</span>
                </a>

                <a href="/admin/products" class="nav-item <%= activeMenu==="products"?'active':''%>">
                    <i class="fa-solid fa-box-open"></i>
                    <span>Products</span>
                </a>

                <a href="/admin/orders" class="nav-item <%= activeMenu==="orders"?'active':''%>">
                    <i class="fa-solid fa-cart-shopping"></i>
                    <span>Orders</span>
                </a>

                <a href="/admin/sales" class="nav-item <%= activeMenu==="sales"?'active':''%>">
                    <i class="fa-solid fa-chart-line"></i>
                    <span>Sales</span>
                </a>

                <a href="/admin/coupons" class="nav-item <%= activeMenu==="coupons"?'active':''%>">
                    <i class="fa-solid fa-ticket"></i>
                    <span>Coupons</span>
                </a>

            </div>


            <button class="logout-btn" onclick="confirmLogout()">Logout</button>

        </div>

        <div class="content-area">
<%
let urlSearch = "";
try {
    let fullUrl = req.originalUrl || "";
    let parsedUrl = new URL(fullUrl, "http://localhost");
    urlSearch = parsedUrl.searchParams.get("search") || "";
} catch (e) {
    urlSearch = "";
}
%>
                <div class="top-header">
                </div>


                <script>

                    function confirmLogout(){
                        Swal.fire({
                            title:"Are you sure?",
                            text:"You will be logged out.",
                            icon:"warning",
                            showCancelButton:true,
                            confirmButtonColor:'#3085d6',
                            cancelButtonColor:"#3085d6",
                            confirmButtonText:"Logout"
                        }).then((result)=>{
                            if(result.isConfirmed){
                                window.location.href="/admin/logout"
                            }
                        })
                    }



                    document.addEventListener('DOMContentLoaded', () => {
                        const cancelBtn = document.getElementById('cancelSearch');

                        if (cancelBtn) {
                            cancelBtn.addEventListener('click', () => {
                                window.location.href = "/admin/users";
                            });
                        }
                    });
                </script>