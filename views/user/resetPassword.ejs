<%- include("../../views/partials/user/header") %>

<main
    style="background-color: #fff; min-height: 80vh; display: flex; align-items: center; justify-content: center; padding: 60px 40px;">
    
    <div
        style="display: grid; grid-template-columns: 1fr 1fr; gap: 60px; max-width: 1000px; width: 100%; align-items: center; margin-right: 400px;">


        <div style="
background-color: #ffffff;
    border-radius: 12px;
    width: 100%;
    aspect-ratio: 1 / 1;
    display: flex
;
    align-items: center;
    justify-content: center;
    overflow: hidden;
        ">
        </div>


        <div style=display:grid;
        grid-template-columns: 1fr 1fr;
            gap: 60px;
            max-width: 1000px;
            width: 100%;
            align-items: center;
            margin-right: 424px;>
            <div style="margin-bottom: 10px;">
                <h2 style="font-size: 32px; margin-bottom: 10px; color: #000;">Reset Your Password</h2>
                <p style="font-size: 14px; color: #666;">Enter a new password below</p>
            </div>

            <form id="resetForm" method="POST" action="/reset-password"
                style="display: flex; flex-direction: column; gap: 20px;">

                <input 
                    type="password" 
                    id="password" 
                    name="password"
                    placeholder="New Password"
                    style="border: none; border-bottom: 1px solid #ddd; padding: 12px 0; font-size: 14px; background: transparent; outline: none;"> 

                <input 
                    type="password" 
                    id="confirmPassword" 
                    name="confirmPassword"
                    placeholder="Confirm Password"
                    style="border: none; border-bottom: 1px solid #ddd; padding: 12px 0; font-size: 14px; background: transparent; outline: none;">
                
                <% if (message) { %>
                    <p style="color:red; font-size:14px;"><%= message %></p>
                <% } %>

                <button type="submit"
                    style="background-color: #1a1a1a; color: #fff; border: none; padding: 14px; font-size: 14px; font-weight: 600; cursor: pointer; border-radius: 4px;">
                    Submit
                </button>

                <a href="/login" style="font-size: 14px; text-align: center; color: #ef4444; text-decoration: none;">
                    Back to Login
                </a>

            </form>
        </div>

    </div>
</main>

<%- include("../../views/partials/user/footer") %>

<script>
function validateForm(event) {
    const pass = document.getElementById("password").value.trim();
    const cpass = document.getElementById("confirmPassword").value.trim();

    if (!pass || !cpass) {
        alert("All fields are required");
        return false;
    }


    const strong = /^(?=.*[A-Z])(?=.*[a-z])(?=.*\d).{6,}$/;

    if (!strong.test(pass)) {
        alert("Password must be at least 6 characters and include uppercase, lowercase, and number.");
        return false;
    }


    if (pass !== cpass) {
        alert("Passwords do not match");
        return false;
    }

    return true;
}

document.getElementById("resetForm").addEventListener("submit", function (e) {
    if (!validateForm()) {
        e.preventDefault();
    }
});
</script>
